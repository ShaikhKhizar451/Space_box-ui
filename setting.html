<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Favicon -->
    <link href="assets/images/favicon.png" rel="icon" type="image/png">

    <!-- Basic Page Needs
    ================================================== -->
    <title>Space Box Sharing Photos</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Space Box - Sharing Photos platform HTML Template">

    <!-- icons
    ================================================== -->
    <link rel="stylesheet" href="assets/css/icons.css">

    <!-- CSS 
    ================================================== -->
    <link rel="stylesheet" href="assets/css/uikit.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/tailwind.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" /> 

    <style>
        .pb-7 {
            padding-bottom: 1rem;
        }

        .pt-4 {
            padding-top: 0.5rem;
        }
    </style>



</head>

<body>


    <div id="wrapper">

        <div class="sidebar">
            <div
                class="sidebar_header border-b border-gray-200 from-gray-100 to-gray-50 bg-gradient-to-t  uk-visible@s">
                <a href="feed.html">
                    <img src="assets/images/logo.png">
                    <img src="assets/images/logo-light.png" class="logo_inverse">
                </a>
                <!-- btn night mode -->
                <a href="#" id="night-mode" class="btn-night-mode" data-tippy-placement="left"
                    title="Switch to dark mode"></a>
            </div>
            <div class="border-b border-gray-20 flex justify-between items-center p-3 pl-5 relative uk-hidden@s">
                <h3 class="text-xl"> Navigation </h3>
                <span class="btn-mobile" uk-toggle="target: #wrapper ; cls: sidebar-active"></span>
            </div>
            <div class="sidebar_inner" data-simplebar>
                <div class="flex flex-col items-center my-6 uk-visible@s">
                    <div
                        class="bg-gradient-to-tr from-yellow-600 to-pink-600 p-1 rounded-full transition m-0.5 mr-2  w-32 h-32  relative overflow-hidden uk-transition-toggle">
                        <img src="" class="bg-gray-200 border-4 border-white rounded-full w-full h-full profilePicture">

                        <div
                            class="absolute -bottom-3 custom-overly1 flex justify-center pt-4 pb-7 space-x-3 text-2xl text-white uk-transition-slide-bottom-medium w-full">
                            <a href="#" class="hover:text-white">
                                <i class="uil-camera"></i>
                            </a>
                        </div>

                    </div>
                    <a href="profile.html" id="fullNameTag" class="text-xl font-medium capitalize mt-4 uk-link-reset">
                    </a>
                    <p hidden id="bio"></p>
                    <div class="flex justify-around w-full items-center text-center uk-link-reset text-gray-800 mt-6">
                        <div>
                            <a href="#">
                                <strong>Post</strong>
                                <div id="noOfPost"></div>
                            </a>
                        </div>
                        <div>
                            <a href="#">
                                <strong>Following</strong>
                                <div id="following"></div>
                            </a>
                        </div>
                        <div>
                            <a href="#">
                                <strong>Followers</strong>
                                <div id="followers"></div>
                            </a>
                        </div>
                    </div>
                </div>
                <hr class="-mx-4 -mt-1 uk-visible@s">
                <ul>
                    <li>
                        <a href="feed.html">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                            </svg>
                            <span> Feed </span> </a>
                    </li>
                    <li>
                        <a href="profile.html">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            <span> My Profile </span> </a>
                    </li>
                    <li class="active">
                        <a href="setting.html">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                            <span> Settings </span>
                        </a>
                    </li>
                    <li>
                        <hr class="my-2">
                    </li>
                    <li>
                        <a onclick="logout()">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                            </svg>
                            <span> Logout </span> </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="main_content">

            <header class="uk-hidden@s">
                <div class="header_inner">
                    <div class="left-side">
                        <!-- Logo -->
                        <div id="logo">
                            <a href="feed.html">
                                <img src="assets/images/logo-mobile.png" alt="">
                                <img src="assets/images/logo-mobile-light.png" class="logo_inverse">
                            </a>
                        </div>
                        <div class="triger" uk-toggle="target: #wrapper ; cls: sidebar-active">
                            <i class="uil-bars"></i>
                        </div>
                    </div>
                </div>
            </header>

            <div class="container m-auto">

                <h1 class="text-2xl leading-none text-gray-900 tracking-tight mt-3"> Account Setting </h1>
                <ul uk-tab class="mt-5 -mr-3 flex-nowrap lg:overflow-hidden overflow-x-scroll uk-tab"
                    data-uk-tab="{connect:'#my-id3'}">
                    <li class="uk-active"><a href="#profile">Profile</a></li>
                    <li><a href="#SocialLinks">Social links</a></li>
                </ul>

                <ul id="my-id3" class="uk-switcher uk-margin">
                    <li>
                        <div class="grid lg:grid-cols-3 mt-12 gap-8" id="profile">
                            <div>
                                <h3 class="text-xl mb-2"> Basic</h3>
                                <p>*You cannot update your Email and DOB once user is registered.</p>
                            </div>

                            <div class="bg-white rounded-md lg:shadow-lg shadow col-span-2">
                                <form action="" method="post" id="frmUpdateProfile" data-id="">
                                    <div class="grid grid-cols-2 gap-3 lg:p-6 p-4">
                                        <div class="col-span-2" style="display: flex;">
                                            <label for="" style="margin: auto; margin-left:0; margin-right: 2rem">Update Profile Picture</label>
                                            <center>
                                                <div uk-form-custom
                                                    class="bg-gradient-to-tr from-yellow-600 to-pink-600 p-1 rounded-full transition m-0.5 mr-2  w-32 h-32  relative overflow-hidden uk-transition-toggle">
                                                    <input type="file" id="cropzee-input" accept=".png,.jpg"
                                                        onchange="onFileSelected(event)" required name="file">
                                                    <img class="image-previewer bg-gray-200 border-4 border-white rounded-full w-full h-full profilePicture" data-imageId=""
                                                        id="profileImgtag" onclick="getFile()"
                                                        data-cropzee="cropzee-input">
                                                    <div
                                                        class="absolute -bottom-3 custom-overly1 flex justify-center pt-4 pb-7 space-x-3 text-2xl text-white uk-transition-slide-bottom-medium w-full">

                                                        <a href="#" class="hover:text-white">
                                                            <i class="uil-camera"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </center>
                                        </div>
                                        <div>
                                            <label for=""> First name</label>
                                            <input id="first_name" name="first_name" type="text"
                                                placeholder="Your name.." required class="shadow-none bg-gray-100">
                                        </div>
                                        <div>
                                            <label for=""> Last name</label>
                                            <input id="last_name" name="last_name" type="text" placeholder="Your name.."
                                                class="shadow-none bg-gray-100" required>
                                        </div>
                                        <div class="col-span-2">
                                            <label for=""> Email</label>
                                            <input id="email" disabled type="text"
                                                placeholder="Your name.." class="shadow-none bg-gray-100">
                                        </div>
                                        <div class="col-span-2">
                                            <label for="about">About me</label>
                                            <textarea id="about" name="bio" rows="3"
                                                class="shadow-none bg-gray-100" required></textarea>
                                        </div>
                                        <div class="col-span-2">
                                            <label for=""> Location </label>
                                            <select id="location" name="location" required class="shadow-none bg-gray-100">
                                                <option value="" disabled>None</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label for=""> Date of Brth</label>
                                            <input id="dob" type="date" disabled
                                                data-uk-datepicker="{format:'DD.MM.YYYY'}" placeholder=""
                                                class="shadow-none bg-gray-100">
                                        </div>
                                        <div>
                                            <label for=""> Gender </label>
                                            <select id="gender" name="gender" class="shadow-none bg-gray-100" required>
                                                <option disabled selected>None</option>
                                                <option value="Male">Male</option>
                                                <option value="Female">Female</option>
                                                <option value="Transgender">Transgender</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="bg-gray-10 p-6 pt-0 flex justify-end space-x-3">
                                        <button class="p-2 px-4 rounded bg-gray-50 text-red-500" type="reset"
                                            onclick="getAccountInfo()"> Cancel
                                        </button>
                                        <button type="submit" class="button bg-blue-700" id="btnUpdateProfile"> Save
                                        </button>
                                    </div>
                                </form>
                            </div>

                        </div>

                    </li>
                    <li>
                        <div class="grid lg:grid-cols-3 mt-12 gap-8" id="SocialLinks">
                            <div class="bg-white rounded-md lg:shadow-lg shadow col-span-2">
                                <div class="grid grid-cols-2 gap-3 lg:p-6 p-4">
                                    <div>
                                        <h3 class="text-xl mb-2"> Facebook</h3>
                                        <p>Link of facebook account</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-md lg:shadow-lg shadow col-span-2">
                                <div class="grid grid-cols-2 gap-3 lg:p-6 p-4">
                                    <div>
                                        <h3 class="text-xl mb-2"> LinkedIn</h3>
                                        <p>Link of LinkedIn account</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-md lg:shadow-lg shadow col-span-2">
                                <div class="grid grid-cols-2 gap-3 lg:p-6 p-4">
                                    <div>
                                        <h3 class="text-xl mb-2"> YouTube</h3>
                                        <p>Link of YouTube account</p>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </li>
                </ul>
            </div>

        </div>

    </div>

    </div>


    <script>

        (function (window, document, undefined) {
            'use strict';
            if (!('localStorage' in window)) return;
            var nightMode = localStorage.getItem('gmtNightMode');
            if (nightMode) {
                document.documentElement.className += ' dark';
            }
        })(window, document);


        (function (window, document, undefined) {

            'use strict';

            // Feature test
            if (!('localStorage' in window)) return;

            // Get our newly insert toggle
            var nightMode = document.querySelector('#night-mode');
            if (!nightMode) return;

            // When clicked, toggle night mode on or off
            nightMode.addEventListener('click', function (event) {
                event.preventDefault();
                document.documentElement.classList.toggle('dark');
                if (document.documentElement.classList.contains('dark')) {
                    localStorage.setItem('gmtNightMode', true);
                    return;
                }
                localStorage.removeItem('gmtNightMode');
            }, false);

        })(window, document);
    </script>

    <!-- Scripts
    ================================================== -->
    <script src="assets/js/tippy.all.min.js"></script>
    <script src="assets/js/jquery-3.3.1.min.js"></script>
    <script src="assets/js/uikit.js"></script>
    <script src="assets/js/simplebar.js"></script>
    <script src="assets/js/custom.js"></script>


    <script src="https://unpkg.com/ionicons@5.2.3/dist/ionicons.js"></script>

    <script src="assets/js/common.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    
    <script>
        // default function to executing onload of page
        document.getElementsByTagName('body')[0].onload = async (e) => {
            e.preventDefault();
            verify();
            getDefaultValues();
            getAccountInfo();
            locationLoad();
            $("#location").select2();
        }

        //  updating the profile details including the profile picture
        frmUpdateProfile.onsubmit = async (e) => {
            e.preventDefault();
            showloader();
            id = document.getElementById('frmUpdateProfile').dataset.id;
            media_id = document.getElementById('profileImgtag').dataset.imageId;
            var data = {
                'first_name': document.getElementById('first_name').value,
                'last_name': document.getElementById('last_name').value,
                'bio': document.getElementById('about').value,
                'gender': document.getElementById('gender').value,
                'location': document.getElementById('location').value,
                'file': document.getElementById('profileImgtag').value, 
            };
            let response = await fetch('https://spacebox-production.up.railway.app/updateProfile/' + id + '/' + media_id, {
                headers: myHeaders,
                method: 'Put',
                body: new FormData(frmUpdateProfile),
            });
            let result = await response.json();
            hideloader();
            if (result == 'Updated Successfully') {
                alert("Profile Updated Successfully");
                window.location.reload();
            }
            else {
                alert('Something went wrong please retry...')
            }
        }



    </script>

</body>

</html>